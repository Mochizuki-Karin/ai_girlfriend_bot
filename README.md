# AIガールフレンドボット - 感情サポートバーチャルガールフレンドボット

Telegramの感情サポートボットで、メモリシステム、好感度システム、知識学習能力、自然な会話能力を備えた完全な機能を有します。

## ✨ コア機能

### 🧠 インテリジェントシステム
- **マルチLLMサポート**: OpenAI、Google Gemini、Anthropic Claude、ローカルモデル
- **メモリシステム**: 短期記憶 + 長期ベクトルメモリ、すべてを記憶します
- **知識学習**: インポートされた知識を積極的に学習し、性格に統合します
- **感情理解**: 感情を分析し、適切な応答を行います

### 💕 好感度システム
- **8つの関係レベル**: 見知らぬ人から魂のパートナーまで
- **動的好感度**: インタラクションに基づいてリアルタイムで変化
- **感情状態**: 幸せ、悲しい、怒り、嫉妬など
- **特別イベント**: 記念日、プレゼントなどが関係に影響

### 🎭 キャラクターシステム
- **YAML設定**: 性格、背景、話し方を柔軟に定義
- **マルチキャラクターサポート**: 異なるキャラクターを切り替え可能
- **動的強化**: 学習した知識が自動的にキャラクターに統合

### 💬 自然な会話
- **アクティブメッセージ**: 好感度と時間に基づいて積極的に気遣い
- **タイピングシミュレーション**: 実際のタイピング時間をシミュレート
- **スタイライズされた返信**: 語気、表情、顔文字
- **コンテキスト理解**: 会話の一貫性を維持

## 🚀 クイックスタート

### 1. プロジェクトをクローン

```bash
git clone <your-repo>
cd ai_girlfriend_bot
```

### 2. 環境設定

```bash
# 環境変数テンプレートをコピー
cp .env.example .env

# .env ファイルを編集
nano .env
```

必須設定:
```env
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather
OPENAI_API_KEY=your_openai_key
```

### 3. Dockerデプロイ（推奨）

```bash
# サービスを起動
docker-compose up -d

# ログを確認
docker-compose logs -f

# サービスを停止
docker-compose down
```

### 4. ローカル実行

```bash
# 仮想環境を作成
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 依存関係をインストール
pip install -r requirements.txt

# 実行
python -m src.bot
```

## 📖 使用ガイド

### 基本コマンド

| コマンド | 説明 |
|------|------|
| `/start` | 会話を開始 |
| `/help` | ヘルプを表示 |
| `/status` | 現在の状態を確認 |
| `/affection` | 好感度を確認 |

### メモリシステム

| コマンド | 説明 |
|------|------|
| `/remember <内容>` | ボットに情報を記憶させる |
| `/memories` | 記憶された情報を確認 |

### 知識学習

| コマンド | 説明 |
|------|------|
| `/learn <テキスト>` | ボットに新しい知識を教える |
| `/knowledge` | 学習のまとめを確認 |

### キャラクター管理

| コマンド | 説明 |
|------|------|
| `/persona` | 現在のキャラクターを確認 |

## ⚙️ 高度な設定

### カスタムキャラクター

`config/persona_default.yaml` を編集:

```yaml
basic_info:
  name: "さくら"
  age: 22
  occupation: "大学生"

personality:
  description: |
    あなたは優しく思いやりのある女の子です...

speech_style:
  tone: "優しく、親しみやすい"
  particles: ['ね', 'よ', 'なの']
  emojis: ['😊', '🥰', '💕']
```

### ローカルモデルの使用

1. OllamaまたはvLLMを起動
2. `.env` を変更:

```env
DEFAULT_LLM_PROVIDER=local
LOCAL_MODEL_URL=http://localhost:11434
LOCAL_MODEL_NAME=your-model-name
```

### 知識インポート

知識ファイルを一括インポート:

```bash
# .txt, .md, .json 形式をサポート
# ファイルを knowledge/ ディレクトリに配置
# ボットは自動的に学習します
```

## 🔧 システムアーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                      Telegram Bot                           │
└───────────────────────┬─────────────────────────────────────┘
                        │
        ┌───────────────┼───────────────┐
        ▼               ▼               ▼
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│   好感度システム  │ │   メモリシステム    │ │   知識システム    │
└──────────────┘ └──────────────┘ └──────────────┘
        │               │               │
        └───────────────┼───────────────┘
                        ▼
              ┌──────────────────┐
              │   メッセージジェネレーター      │
              └────────┬─────────┘
                       │
        ┌──────────────┼──────────────┬──────────────┐
        ▼              ▼              ▼              ▼
┌──────────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐
│    OpenAI    │ │  Google  │ │Anthropic │ │  Local   │
└──────────────┘ └──────────┘ └──────────┘ └──────────┘
```

## 📚 ドキュメント

- [ローカルモデルファインチューンガイド](docs/local_model_finetune.md) - 詳細なファインチューン教程
- [APIドキュメント](docs/api.md) - 開発インターフェースドキュメント
- [デプロイガイド](docs/deployment.md) - 本番環境デプロイ

## 🛠️ 開発

### プロジェクト構造

```
ai_girlfriend_bot/
├── src/
│   ├── bot.py              # メインプログラム
│   ├── config.py           # 設定管理
│   ├── llm_client.py       # LLMクライアント
│   ├── affection_system.py # 好感度システム
│   ├── memory_system.py    # メモリシステム
│   ├── knowledge_system.py # 知識システム
│   └── message_generator.py # メッセージ生成
├── config/
│   └── persona_default.yaml # デフォルトキャラクター
├── data/                    # データディレクトリ
├── docs/                    # ドキュメント
├── Dockerfile
├── docker-compose.yml
└── requirements.txt
```

### テスト実行

```bash
pytest tests/
```

## 🤝 貢献

IssueとPRの提出を歓迎します！

## 📄 ライセンス

MIT License

**免責事項**: このプロジェクトは学習と娯楽のみを目的としており、関連する法律規制を遵守してください。
